{"version":3,"sources":["camptix-multi-popup.js"],"names":["camptix_l10n","camptix_inr_vars","jQuery","document","ready","$","razorpay_handler","$container","$form","ticket_quantity","text","order_id","val","receipt_id","validate_fields","i","show_errors","error_html","$errors","remove","html","prepend","animate","scrollTop","offset","top","on","change","css","e","phone","console","log","replace","isNumeric","length","focus","preventDefault","gateway_id","errors","$response","$submit_button","this","post","attr","serialize","done","response","success","$el","Razorpay","key","merchant_key_id","name","data","popup_title","image","popup","handler","prop","window","location","assign","return_url","prefill","fullname","email","contact","modal","ondismiss","find","hide","theme","color","image_padding","open","fail","always"],"mappings":"AAGA,IAAIA,aAAcC,iBAKlBC,OAAOC,UAAUC,MAAM,SAAUC,GAEhC,IAAIC,KACHC,EAAmBF,EAAE,QACrBG,EAAmBH,EAAE,OAAQE,GAC7BE,EAAmBJ,EAAE,4CAA6CE,GAAYG,OAC9EC,EAAmBN,EAAE,kCAAmCG,GAAOI,MAC/DC,EAAmBR,EAAE,oCAAqCG,GAAOI,MAO9DE,EAAkB,WACrB,IAAK,IAAIC,EAAI,EAAGA,GAAKN,EAAiBM,IACrC,IAAKV,EAAE,iCAAmCU,EAAI,aAAcP,GAAOI,MAClE,OAAO,EAGT,OAAO,GAQJI,EAAc,SAAUC,GAC3B,IAAIC,EAAU,GAGdb,EAAE,cAAeE,GAAYY,SAG7BD,EAAUb,EAAE,+BAA+Be,KAAKH,GAChDV,EAAWc,QAAQH,GAGnBb,EAAE,aAAaiB,SACbC,UAAWhB,EAAWiB,SAASC,KAEhC,SA0BFpB,EAAE,oCAAqCG,GAAOkB,GAAG,SAAU,cAExDC,SAKHtB,EAAE,uBAAuBuB,IAAI,UAAW,cAKxCpB,EAAMkB,GAAG,SAAU,SAAUG,GAEzB,IAAIC,EAAQzB,EAAE,WAAWO,MAItB,OAHAmB,QAAQC,IAAIF,GACZA,EAAQA,EAAMG,QAAQ,UAAU,IAE3B5B,EAAE6B,UAAUJ,GASbA,EAAMK,OAAS,IAElBJ,QAAQC,IAAI,QAET3B,EAAE,YAAYK,KAAK,8DACnBL,EAAE,YAAYuB,IAAI,QAAQ,OAC1BvB,EAAE,WAAWO,IAAI,IACjBP,EAAE,WAAW+B,QAEbP,EAAEQ,kBAEL,GAKHpC,iBAAiBqC,aAAejC,EAAE,oCAAqCG,GAAOI,QAIlFiB,EAAEQ,kBAEK,IA9BAN,QAAQC,IAAI,QACT3B,EAAE,YAAYK,KAAK,6BACnBL,EAAE,YAAYuB,IAAI,QAAQ,OAC1BvB,EAAE,WAAWO,IAAI,IACjBP,EAAE,WAAW+B,QACbP,EAAEQ,kBACL,KA8BR7B,EAAMkB,GAAG,iBAAkB,uBAAwB,SAAUG,GAE5D,GAAI5B,iBAAiBqC,aAAejC,EAAE,oCAAqCG,GAAOI,MACjF,OAAO,EAMR,GAHAiB,EAAEQ,kBAGGvB,IAGJ,OAFAE,EAAY,0BAA4Bf,iBAAiBsC,OAAOT,MAAQ,WAEjE,EAGR,IACCU,EADGC,EAAiBpC,EAAEqC,MAqEvB,OAlEArC,EAAEsC,KAAKnC,EAAMoC,KAAK,UAAWpC,EAAMqC,aACjCC,KAAK,SAAUC,GAEf,IAAKA,EAASC,QAAS,CACtB,IAAIC,EAAM5C,EAAE,eAAee,KAAK2B,GAIhC,OAFA/B,EAAYX,EAAE,cAAe4C,GAAK7B,SAE3B,EAIRoB,EAAYO,GAEZzC,EAAmB,IAAI4C,UACtBC,IAAYlD,iBAAiBmD,gBAC7BzC,SAAYA,EACZ0C,KAAYb,EAAUc,KAAKC,YAC3BC,MAAYvD,iBAAiBwD,MAAMD,MAEnCE,QAAY,SAAUX,GAIrBN,EAAekB,KAAK,YAAY,GAIhCC,OAAOC,SAASC,OAAOtB,EAAUc,KAAKS,WAAa,mBAAqBpD,EAAW,eAAiBE,IAOrGmD,SACCX,KAAWb,EAAUc,KAAKW,SAC1BC,MAAW1B,EAAUc,KAAKY,MAC1BC,QAAW3B,EAAUc,KAAKxB,OAG3BsC,OACCC,UAAa,WAEZ7D,EAAM8D,KAAK,2BAA2BC,OAGtC9B,EAAekB,KAAK,YAAY,KAIlCa,OACCC,MAAiBxE,iBAAiBwD,MAAMgB,MACxCC,eAAiB,MAIFC,SAEjBC,KAAK,cAELC,OAAO,WAEPpC,EAAekB,KAAK,YAAY,MAG3B","file":"camptix-multi-popup.js","sourcesContent":["/**\n * Give - Razorpay Popup Checkout JS\n */\nvar camptix_l10n, camptix_inr_vars;\n\n/**\n * On document ready setup Razorpay events.\n */\njQuery(document).ready(function ($) {\n\t// Cache donation button title early to reset it if razorpay checkout popup close.\n\tvar razorpay_handler = [],\n\t\t$container       = $('#tix'),\n\t\t$form            = $('form', $container),\n\t\tticket_quantity  = $('.tix_tickets_table td.tix-column-quantity', $container).text(),\n\t\torder_id         = $('input[name=\"razorpay_order_id\"]', $form).val(),\n\t\treceipt_id       = $('input[name=\"razorpay_receipt_id\"]', $form).val();\n\n\t/**\n\t * Validate extra attendee information fields.\n\t *\n\t * @returns {boolean}\n\t */\n\tvar validate_fields = function () {\n\t\tfor (var i = 1; i <= ticket_quantity; i++) {\n\t\t\tif (!$('input[name=\"tix_attendee_info[' + i + '][phone]\"]', $form).val()) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t};\n\n\t/**\n\t * Show errors.\n\t *\n\t * @param error_html\n\t */\n\tvar show_errors = function (error_html) {\n\t\tvar $errors = '';\n\n\t\t// Remove old errors html.\n\t\t$('#tix-errors', $container).remove();\n\n\t\t// Set new error html.\n\t\t$errors = $('<div id=\"tix-errors\"></div>').html(error_html);\n\t\t$container.prepend($errors);\n\n\t\t// Scroll to error div.\n\t\t$('html,body').animate({\n\t\t\t\tscrollTop: $container.offset().top\n\t\t\t},\n\t\t\t'slow'\n\t\t);\n\t};\n\n\t/**\n\t * Show/ Hide extra attendee fields.\n\t *\n\t * @param show\n\t */\n\tvar show_custom_attendee_fields = function (show) {\n\t\tvar $field_container;\n\n\t\tfor (var i = 1; i <= 2; i++) {\n\t\t\t$field_container = $('input[name=\"tix_attendee_info[' + i + '][phone]\"]', $form).closest('tr');\n\n\t\t\tif (show) {\n\t\t\t\t$field_container.show();\n\t\t\t} else {\n\t\t\t\t$field_container.hide();\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Show extra attendee fields only if razorpay selected\n\t */\n\t$('select[name=\"tix_payment_method\"]', $form).on('change', function () {\n\t\t\n\t}).change();\n\n\t/**\n\t * Increase razorpay's z-index to appear above of all content.\n\t */\n\t$('.razorpay-container').css('z-index', '2147483543');\n\n\t/**\n\t * On form submit prevent submission for Razorpay only.\n\t */\n\t$form.on('submit', function (e) {\n\t    \n\t    var phone = $('.mobile').val();\n        console.log(phone);\n        phone = phone.replace(/[^0-9]/g,'');\n\n        if(!($.isNumeric(phone))){\n        \tconsole.log('test');\n            $('.message').text('Please Enter Only Numbers');\n            $('.message').css('color','red');\n            $('.mobile').val('');\n            $('.mobile').focus();\n            e.preventDefault();\n\t\treturn false;\n        }else\n        if (phone.length < 10 )\n        {\n        \tconsole.log('test');\n            //alert('Phone number must be 10 digits.');\n            $('.message').text('Please Enter correct Mobile Number Or Number with STD Code');\n            $('.message').css('color','red');\n            $('.mobile').val('');\n            $('.mobile').focus();\n            //alert();\n            e.preventDefault();\n\n\t\treturn false;\n\n        } \n     \n\t\t// Bailout.\n\t\tif (camptix_inr_vars.gateway_id !== $('select[name=\"tix_payment_method\"]', $form).val()) {\n\t\t\treturn true;\n\t\t}\n\n\t\te.preventDefault();\n\n\t\treturn false;\n\t});\n\n\t/**\n\t * When the submit button is clicked.\n\t */\n\t$form.on('click touchend', 'input[type=\"submit\"]', function (e) {\n\t\t// Bailout.\n\t\tif (camptix_inr_vars.gateway_id !== $('select[name=\"tix_payment_method\"]', $form).val()) {\n\t\t\treturn true;\n\t\t}\n\n\t\te.preventDefault();\n\n\t\t// Validate custom attendee information fields.\n\t\tif (!validate_fields()) {\n\t\t\tshow_errors('<div class=\"tix-error\">' + camptix_inr_vars.errors.phone + '</div>');\n\n\t\t\treturn false;\n\t\t}\n\n\t\tvar $submit_button = $(this),\n\t\t\t$response;\n\n\t\t$.post($form.attr('action'), $form.serialize())\n\t\t\t.done(function (response) {\n\t\t\t\t// Bailout.\n\t\t\t\tif (!response.success) {\n\t\t\t\t\tvar $el = $('<div></div>').html(response);\n\n\t\t\t\t\tshow_errors($('#tix-errors', $el).html());\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// Cache response for internal use in Razorpay.\n\t\t\t\t$response = response;\n\n\t\t\t\trazorpay_handler = new Razorpay({\n\t\t\t\t\t'key'     : camptix_inr_vars.merchant_key_id,\n\t\t\t\t\t'order_id': order_id,\n\t\t\t\t\t'name'    : $response.data.popup_title,\n\t\t\t\t\t'image'   : camptix_inr_vars.popup.image,\n\t\t\t\t\t// 'description' : '',\n\t\t\t\t\t'handler' : function (response) {\n\t\t\t\t\t\t// Remove loading animations.\n\t\t\t\t\t\t// $form.find('.give-loading-animation').hide();\n\t\t\t\t\t\t// Disable form submit button.\n\t\t\t\t\t\t$submit_button.prop('disabled', true);\n\n\t\t\t\t\t\t// Submit form after charge token brought back from Razorpay.\n\t\t\t\t\t\t// Redirect to success page.\n\t\t\t\t\t\twindow.location.assign($response.data.return_url + '&transaction_id=' + order_id + '&receipt_id=' + receipt_id);\n\t\t\t\t\t},\n\n\t\t\t\t\t// You can add custom data here and fields limited to 15.\n\t\t\t\t\t// 'notes': {\n\t\t\t\t\t// 'extra_information' : $response.data\n\t\t\t\t\t// },\n\t\t\t\t\t'prefill': {\n\t\t\t\t\t\t'name'   : $response.data.fullname,\n\t\t\t\t\t\t'email'  : $response.data.email,\n\t\t\t\t\t\t'contact': $response.data.phone\n\t\t\t\t\t},\n\n\t\t\t\t\t'modal': {\n\t\t\t\t\t\t'ondismiss': function () {\n\t\t\t\t\t\t\t// Remove loading animations.\n\t\t\t\t\t\t\t$form.find('.give-loading-animation').hide();\n\n\t\t\t\t\t\t\t// Re-enable submit button and add back text.\n\t\t\t\t\t\t\t$submit_button.prop('disabled', false);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\n\t\t\t\t\t'theme': {\n\t\t\t\t\t\t'color'        : camptix_inr_vars.popup.color,\n\t\t\t\t\t\t'image_padding': false\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\trazorpay_handler.open();\n\t\t\t})\n\t\t\t.fail(function () {\n\t\t\t})\n\t\t\t.always(function () {\n\t\t\t\t// Enable form submit button.\n\t\t\t\t$submit_button.prop('disabled', false);\n\t\t\t});\n\n\t\treturn false;\n\t});\n});\n\n//# sourceMappingURL=assets/js/camptix-multi-popup.js.map\n"]}